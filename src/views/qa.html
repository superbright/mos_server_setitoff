<!doctype html>

<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.5">
    <title>QA - Museum of Sex - VR</title>

    <link rel="stylesheet" href="./mdl/material.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/dialog-polyfill.css">
    <link rel="stylesheet" href="./css/icon.css?family=Material+Icons">

    <script src="./mdl/material.min.js"></script>
    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/dialog-polyfill.js"></script>
  </head>
  <body>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      /* Connect to socket */
      var socket = io('http://192.168.1.212:4000');
      var ip = 'http://192.168.1.212:4000';
      //var socket = io('localhost:4000');
      //var ip = 'http://localhost:4000';
      socket.on('hello', function (data) {
        console.log(data);
      });

      var heightmap = [
        {
          key: "5’0” (152 cm)",
          value: 152.40
        },
        {
          key: "5’1” (156 cm)",
          value: 154.94
        },
        {
          key: "5’2” (157 cm)",
          value:  157.48
        },
        {
          key: "5’3” (160 cm)",
          value:  160.02
        },
        {
          key: "5’4” (162 cm)",
          value:  162.56
        },
        {
          key: "5’5” (165 cm)",
          value:  165.10
        },
        {
          key: "5’6” (168 cm)",
          value: 167.74
        },
        {
          key: "5’7” (170 cm)",
          value:  170.18
        },
        {
          key: "5’8” (173 cm)",
          value:  172.72
        },
        {
          key: "5’9” (175 cm)",
          value: 175.26
        },
        {
          key: "5’10” (178 cm)",
          value: 177.80
        },
        {
          key: "5’11” (180 cm)",
          value: 180.34
        },
        {
          key: "6’0” (183 cm)",
          value: 182.88
        },
        {
          key: "6’1” (185 cm)",
          value: 185.45
        },
        {
          key: "6’2” (188 cm)",
          value: 187.96
        },
        {
          key: "6’3” (190 cm)",
          value: 190.50
        },
        {
          key: "6’4” (193 cm)",
          value: 193.04
        },
        {
          key: "6’5” (195 cm)",
          value: 195.58
        },
        {
          key: "6’6” (198 cm)",
          value: 198.12
        },
        {
          key: "6’7” (200 cm)",
          value: 200.66
        },
        {
          key: "6’8” (203 cm)",
          value:  203.20
        },
        {
          key: "6’9” (206 cm)",
          value:  205.74
        },
        {
          key: "6’10” (208 cm)",
          value: 208.28
        }
      ];
     
      function populate(selector,key,value) {
        $(selector).append('<option value="'+ value +'">'+ key + '</option>');
      }

      function updatePlayerDataView() {
        console.log("update player data view");
        $.getJSON( ip + "/config", function( data ) {
          var playerData = data["PLAYERS"];

          var player5h;

          // get player heights
          heightmap.forEach(function(item) {
            if(item.value == playerData[4].height) {
              player5h = item.key;
            }
          });

          // display player height from JSON file
          $( '#queen-height-data' ).text(player5h);
        });
      }

      $(document).ready(function() {
        /* Player heights */
        heightmap.forEach(function(item) {
          populate('#queen-height',item.key,item.value);
        });

        /* Update queen height */
        $('#queen-height').on('change', function() {
          var height = this.value;
          $.ajax({
            url: '/setheight',
            type: 'POST',
            dataType : "json",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(
              {
                "player" : 4,
                "height" : parseFloat(height)
              }
            ), // data as js object
            success: function(result) {
                console.log("ok " + result)
            }
          });

          // update data view value
          $.getJSON( ip + '/config' , function( data ) {
            var playerData = data["PLAYERS"];
            var player5h

            // get player heights in feet and inches
            heightmap.forEach(function(item) {
              if(item.value == playerData[4].height) {
                player5h = item.key;
              }
            });

            // display player heights from JSON file
            $( '#queen-height-data' ).text(player5h);
          });
        });

        // Button click feedback
        $("button").click(function() {
          $('.button-transform').toggleClass('button-transform-active');
        });

        /* Dildo controls */
        // Player 1
        $( "#player1-dildon" ).click(function() {
          socket.emit('dildon', { set: 'dildon', player: 'player1vib' });
        });

        $( "#player1-surf" ).click(function() {
          socket.emit('dildon', { set: 'surf', player: 'player1vib' });
        });

        $( "#player1-pingpong" ).click(function() {
          socket.emit('dildon', { set: 'pingpong', player: 'player1vib' });
        });

        $( "#player1-tide" ).click(function() {
          socket.emit('dildon', { set: 'tide', player: 'player1vib' });
        });

        $( "#player1-wave" ).click(function() {
          socket.emit('dildon', { set: 'wave', player: 'player1vib' });
        });

        $( "#player1-dildoff" ).click(function() {
          socket.emit('dildoff', { set: 'dildoff', player: 'player1vib' });
        });

        $( "#player1-connectvib" ).click(function() {
          socket.emit('connectvib', { set: 'connect', player: 'player1vib' });
        });

        // Player 2
        $( "#player2-dildon" ).click(function() {
          socket.emit('dildon', { set: 'dildon', player: 'player2vib' });
        });

        $( "#player2-surf" ).click(function() {
          socket.emit('dildon', { set: 'surf', player: 'player2vib' });
        });

        $( "#player2-pingpong" ).click(function() {
          socket.emit('dildon', { set: 'pingpong', player: 'player2vib' });
        });

        $( "#player2-tide" ).click(function() {
          socket.emit('dildon', { set: 'tide', player: 'player2vib' });
        });

        $( "#player2-wave" ).click(function() {
          socket.emit('dildon', { set: 'wave', player: 'player2vib' });
        });

        $( "#player2-dildoff" ).click(function() {
          socket.emit('dildoff', { set: 'dildoff', player: 'player2vib' });
        });

        $( "#player2-connectvib" ).click(function() {
          socket.emit('connectvib', { set: 'connect', player: 'player2vib' });
        });

        // Player 3
        $( "#player3-dildon" ).click(function() {
          socket.emit('dildon', { set: 'dildon', player: 'player3vib' });
        });

        $( "#player3-surf" ).click(function() {
          socket.emit('dildon', { set: 'surf', player: 'player3vib' });
        });

        $( "#player3-pingpong" ).click(function() {
          socket.emit('dildon', { set: 'pingpong', player: 'player3vib' });
        });

        $( "#player3-tide" ).click(function() {
          socket.emit('dildon', { set: 'tide', player: 'player3vib' });
        });

        $( "#player3-wave" ).click(function() {
          socket.emit('dildon', { set: 'wave', player: 'player3vib' });
        });

        $( "#player3-dildoff" ).click(function() {
          socket.emit('dildoff', { set: 'dildoff', player: 'player3vib' });
        });

        $( "#player3-connectvib" ).click(function() {
          socket.emit('connectvib', { set: 'connect', player: 'player3vib' });
        });

        // Player 4
        $( "#player4-dildon" ).click(function() {
          socket.emit('dildon', { set: 'dildon', player: 'player4vib' });
        });

        $( "#player4-surf" ).click(function() {
          socket.emit('dildon', { set: 'surf', player: 'player4vib' });
        });

        $( "#player4-pingpong" ).click(function() {
          socket.emit('dildon', { set: 'pingpong', player: 'player4vib' });
        });

        $( "#player4-tide" ).click(function() {
          socket.emit('dildon', { set: 'tide', player: 'player4vib' });
        });

        $( "#player4-wave" ).click(function() {
          socket.emit('dildon', { set: 'wave', player: 'player4vib' });
        });

        $( "#player4-dildoff" ).click(function() {
          socket.emit('dildoff', { set: 'dildoff', player: 'player4vib' });
        });

        $( "#player4-connectvib" ).click(function() {
          socket.emit('connectvib', { set: 'connect', player: 'player4vib' });
        });

        /* Elevators */
        $( "#rotate-all" ).click(function() {
          console.log('rotate all');
          socket.emit('rotateAll', { my: 'data' });
        });

        $( "#rotate-one" ).click(function() {
          console.log('rotate one');
          socket.emit('rotateOne', { my: 'data' });
        });
        
        $( "#rotate-two" ).click(function() {
          console.log('rotate two');
          socket.emit('rotateTwo', { my: 'data' });
        });
        
        $( "#rotate-three" ).click(function() {
          console.log('rotate three');
          socket.emit('rotateThree', { my: 'data' });
        });
        
        $( "#rotate-four" ).click(function() {
          console.log('rotate four');
          socket.emit('rotateFour', { my: 'data' });
        });
        
        $( "#rotate-stop" ).click(function() {
          console.log('stop rotate');
          socket.emit('rotateStop', { my: 'data' });
        });
        
        $( "#rotate-start" ).click(function() {
          console.log('start rotate');
          socket.emit('rotateStart', { my: 'data' });
        });

        updatePlayerDataView();
      });
    </script>

    <!-- QUEEN -->
    <div class="mdl-grid bg-color-gray-light">
      <div class="mdl-cell mdl-cell--12-col">
        <b>Queen</b>
      </div>
    </div>
    <div class="mdl-grid">
      <div class="mdl-cell mdl-cell--2-col">
        Enter queen's height
      </div>
      <div class="mdl-cell mdl-cell--2-col">
        <select class="mdl-selectfield__select" id="queen-height" name="player5">
          <option value=""></option>
        </select>
      </div>
      <div class="mdl-cell mdl-cell--2-col" id="queen-height-data">
      </div>
    </div>
    <!-- END QUEEN -->

    <!-- ELEVATORS -->
    <div class="mdl-grid bg-color-gray-light">
      <div class="mdl-cell mdl-cell--12-col">
        <b>Elevators</b>
      </div>
    </div>
    <div class="mdl-grid">
      <div class="mdl-cell mdl-cell--12-col">
        <button id="rotate-all" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          Rotate all
        </button>
        <button id="rotate-one" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          Rotate one
        </button>
        <button id="rotate-two" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          Rotate two
        </button>
        <button id="rotate-three" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          Rotate three
        </button>
        <button id="rotate-four" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          Rotate four
        </button>
        <button id="rotate-stop" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          Stop rotating
        </button>
        <button id="rotate-start" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          Resume rotating
        </button>
      </div>
    </div>
    <!-- END ELEVATORS -->

    <!-- VIBRATORS -->
    <div class="mdl-grid bg-color-gray-light">
      <div class="mdl-cell mdl-cell--12-col">
        <b>Vibrators</b>
      </div>
    </div>
    <div class="mdl-grid">
      <div class="mdl-cell mdl-cell--12-col">
        Player 1
      </div>
      <!-- PLAYER 1 -->
      <div class="mdl-cell mdl-cell--12-col">
        <button id="player1-dildon" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          DILDON
        </button>

        <button id="player1-wave" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          WAVE
        </button>

        <button id="player1-surf" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          SURF
        </button>

        <button id="player1-tide" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          TIDE
        </button>

        <button id="player1-pingpong" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          PING PONG
        </button>

        <button id="player1-dildoff" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          DILDOFF
        </button>

        <button id="player1-connectvib" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          CONNECT
        </button>
      </div>
      <!-- END PLAYER 1 -->
    </div>
    <div class="mdl-grid">
      <div class="mdl-cell mdl-cell--12-col">
        Player 2
      </div>
      <!-- PLAYER 2 -->
      <div class="mdl-cell mdl-cell--12-col">
        <button id="player2-dildon" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          DILDON
        </button>

        <button id="player2-wave" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          WAVE
        </button>

        <button id="player2-surf" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          SURF
        </button>

        <button id="player2-tide" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          TIDE
        </button>

        <button id="player2-pingpong" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          PING PONG
        </button>

        <button id="player2-dildoff" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          DILDOFF
        </button>

        <button id="player2-connectvib" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          CONNECT
        </button>
      </div>
      <!-- END PLAYER 2 -->
    </div>
    <div class="mdl-grid">
      <div class="mdl-cell mdl-cell--12-col">
        Player 3
      </div>
      <!-- PLAYER 3 -->
      <div class="mdl-cell mdl-cell--12-col">
        <button id="player3-dildon" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          DILDON
        </button>

        <button id="player3-wave" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          WAVE
        </button>

        <button id="player3-surf" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          SURF
        </button>

        <button id="player3-tide" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          TIDE
        </button>

        <button id="player3-pingpong" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          PING PONG
        </button>

        <button id="player3-dildoff" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          DILDOFF
        </button>

        <button id="player3-connectvib" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          CONNECT
        </button>
      </div>
      <!-- END PLAYER 3 -->
    </div>
    <div class="mdl-grid">
      <div class="mdl-cell mdl-cell--12-col">
        Player 4
      </div>
      <!-- PLAYER 4 -->
      <div class="mdl-cell mdl-cell--12-col">
        <button id="player4-dildon" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          DILDON
        </button>

        <button id="player4-wave" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          WAVE
        </button>

        <button id="player4-surf" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          SURF
        </button>

        <button id="player4-tide" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          TIDE
        </button>

        <button id="player4-pingpong" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          PING PONG
        </button>

        <button id="player4-dildoff" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          DILDOFF
        </button>

        <button id="player4-connectvib" class="mdl-button button-transform mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">
          CONNECT
        </button>
      </div>
      <!-- PLAYER 4 -->
    </div>
    <!-- END VIBRATORS -->
  </body>
</html>
