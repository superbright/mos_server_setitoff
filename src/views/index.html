<!doctype html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.5">
  <title>SetitOff Control Panel</title>

  <link rel="stylesheet" href="./mdl/material.min.css">
  <link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="./css/dialog-polyfill.css">
  <!-- <link rel="stylesheet" href="./css/mdl-selectfield.min.css"> -->
  <link rel="stylesheet" href="./css/icon.css?family=Material+Icons">

  <script src="./mdl/material.min.js"></script>
  <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> -->

    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/dialog-polyfill.js"></script>
    <!-- <script src="./js/mdl-selectfield.min.js"></script> -->
</head>
<body>
  <script src="/socket.io/socket.io.js"></script>
<script>

 var heightmap = [
    {
      key: "5’0”",
      value: 152.40
    },
    {
    key: "5’1”",
    value: 154.94
    },
    {
    key: "5’2”",
    value:  157.48
  },
  {
    key: "5’3”",
    value:  160.02
  },
  {
    key: "5’4”",
    value:  162.56
  },
  {
    key: "5’5”",
    value: 	165.10
  },
  {
    key: "5’6”",
    value: 167.74
  },
  {
    key: "5’7”",
    value: 	170.18
  },
  {
    key: "5’8”",
    value: 	172.72
  },
  {
    key: "5’9”",
    value: 175.26
  },
  {
    key: "5’10”",
    value: 177.80
  },
  {
    key: "5’11”",
    value: 180.34
  },
  {
    key: "6’0”",
    value: 182.88
  },
  {
    key: "6’1”",
    value: 185.45
  },
  {
    key: "6’2”",
    value: 187.96
  },
  {
    key: "6’3”",
    value: 190.50
  },
  {
    key: "6’4”",
    value: 193.04
  },
  {
    key: "6’5”",
    value: 195.58
  },
  {
    key: "6’6”",
    value: 198.12
  },
  {
    key: "6’7”",
    value: 200.66
  },
  {
    key: "6’8”",
    value: 	203.20
  },
  {
    key: "6’9”",
    value: 	205.74
  },
  {
    key: "6’10”",
    value: 208.28
  }
]
  //var socket = io('http://192.168.1.212:4000');
  var socket = io('localhost:4000');
  socket.on('hello', function (data) {
    console.log(data);

  });
  socket.on('errormessage', function (data) {
      console.log(data["data"]);
      var dialog = document.querySelector('dialog');
      dialog.showModal();
        $( "#errormessage" ).text(data["data"]);

  });
  socket.on('time', function (data) {
      $( "#timer" ).text(data['time']);
  });

  //players connecting to optitrack
  socket.on('connectionState', function(data) {
      var dataarr = data.split(':');
      console.log(dataarr);
      var enabledColor = '#8ec252';
      var disabledColor = '#ff0000';
      if(dataarr[0] == 'player1') {
        if(dataarr[1] == "True") {
            $('#player1tracking').css('background',enabledColor)
        } else {
          $('#player1tracking').css('background',disabledColor)
        }
      }
      if(dataarr[0] == 'player2') {
        if(dataarr[1] == "True") {
            $('#player2tracking').css('background',enabledColor)
        } else {
          $('#player2 tracking').css('background',disabledColor)
        }
      }

      if(dataarr[0] == 'player3') {
        if(dataarr[1] == "True") {
            $('#player3tracking').css('background',enabledColor)
        } else {
          $('#player3tracking').css('background',disabledColor)
        }
      }
      if(dataarr[0] == 'player4') {
        if(dataarr[1] == "True") {
            $('#player4tracking').css('background',enabledColor)
        } else {
          $('#player4tracking').css('background',disabledColor)
        }
      }

  });



  function populate(selector,key,value) {
    $(selector)
      .append('<option value="'+ value +'">'+ key + '</option>')
  }

  $(document).ready(function() {

    //console.log(heightmap);
    //populate drop downs with heaight values
    heightmap.forEach(function(item) {
        populate('#player1',item.key,item.value);
        populate('#player2',item.key,item.value);
        populate('#player3',item.key,item.value);
        populate('#player4',item.key,item.value);
        populate('#player5',item.key,item.value);
    });

    //gender selection
    $('input[type=radio][name=options1]').change(function() {
       var gender = this.value;
       $.ajax({
         url: '/setgender',
         type: 'POST',
         dataType : "json",
         contentType: "application/json; charset=utf-8",
         data: JSON.stringify(
           {
             "player" : 0,
             "gender" : parseInt(gender)
           }
         ), // data as js object
         success: function(result) {
             console.log("ok " + result)
         }
       });
     });
    $('input[type=radio][name=options2]').change(function() {
        var gender = this.value;
        $.ajax({
          url: '/setgender',
          type: 'POST',
          dataType : "json",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify(
            {
              "player" : 1,
              "gender" : parseInt(gender)
            }
          ), // data as js object
          success: function(result) {
              console.log("ok " + result)
          }
        });
      });
    $('input[type=radio][name=options3]').change(function() {
         var gender = this.value;
         $.ajax({
           url: '/setgender',
           type: 'POST',
           dataType : "json",
           contentType: "application/json; charset=utf-8",
           data: JSON.stringify(
             {
               "player" : 2,
               "gender" : parseInt(gender)
             }
           ), // data as js object
           success: function(result) {
               console.log("ok " + result)
           }
         });
       });
    $('input[type=radio][name=options4]').change(function() {
          var gender = this.value;
          $.ajax({
            url: '/setgender',
            type: 'POST',
            dataType : "json",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(
              {
                "player" : 3,
                "gender" : parseInt(gender)
              }
            ), // data as js object
            success: function(result) {
                console.log("ok " + result)
            }
          });
        });



    $('#player1').on('change', function() {
    //  alert( this.value );
      var height = this.value;
      $.ajax({
        url: '/setheight',
        type: 'POST',
        dataType : "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(
          {
            "player" : 0,
            "height" : parseFloat(height)
          }
        ), // data as js object
        success: function(result) {
            console.log("ok " + result)
        }
      });
    });
    $('#player2').on('change', function() {
      var height = this.value;
      $.ajax({
        url: '/setheight',
        type: 'POST',
        dataType : "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(
          {
            "player" : 1,
            "height" : parseFloat(height)
          }
        ), // data as js object
        success: function(result) {
            console.log("ok " + result)
        }
      });
    })
    $('#player3').on('change', function() {
      var height = this.value;
      $.ajax({
        url: '/setheight',
        type: 'POST',
        dataType : "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(
          {
            "player" : 2,
            "height" : parseFloat(height)
          }
        ), // data as js object
        success: function(result) {
            console.log("ok " + result)
        }
      });
    })
    $('#player4').on('change', function() {
      var height = this.value;
      $.ajax({
        url: '/setheight',
        type: 'POST',
        dataType : "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(
          {
            "player" : 3,
            "height" : parseFloat(height)
          }
        ), // data as js object
        success: function(result) {
            console.log("ok " + result)
        }
      });
    })
    $('#player5').on('change', function() {
      var height = this.value;
      $.ajax({
        url: '/setheight',
        type: 'POST',
        dataType : "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(
          {
            "player" : 4,
            "height" : parseFloat(height)
          }
        ), // data as js object
        success: function(result) {
            console.log("ok " + result)
        }
      });
    })
    //reset everythingin load
    $( "#timer" ).text(0);
    //toggle label
    $('#switch-1').change(function(){
        var isPlayeron = false;
        if($(this).is(':checked')) {
          isPlayeron = true;
        }
        $.ajax({
          url: '/config',
          type: 'POST',
          dataType : "json",
          contentType: "application/json; charset=utf-8",
          //data : JSON.stringify(data),
          data: JSON.stringify(
            {
              "player" : 0,
              "ison" : isPlayeron
            }
          ), // data as js object
          success: function(result) {
              console.log("ok " + result)
              // Do something with the result
          }
        });
    });

    $('#switch-2').change(function(){
      var isPlayeron = false;
      if($(this).is(':checked')) {
        isPlayeron = true;
      }
      $.ajax({
        url: '/config',
        type: 'POST',
        dataType : "json",
        contentType: "application/json; charset=utf-8",
        //data : JSON.stringify(data),
        data: JSON.stringify(
          {
            "player" : 1,
            "ison" : isPlayeron
          }
        ), // data as js object
        success: function(result) {
            console.log("ok " + result)
            // Do something with the result
        }
      });
    });

    $('#switch-3').change(function(){
      var isPlayeron = false;
      if($(this).is(':checked')) {
        isPlayeron = true;
      }
      $.ajax({
        url: '/config',
        type: 'POST',
        dataType : "json",
        contentType: "application/json; charset=utf-8",
        //data : JSON.stringify(data),
        data: JSON.stringify(
          {
            "player" : 2,
            "ison" : isPlayeron
          }
        ), // data as js object
        success: function(result) {
            console.log("ok " + result)
            // Do something with the result
        }
      });
    });

    $('#switch-4').change(function(){
      var isPlayeron = false;
      if($(this).is(':checked')) {
        isPlayeron = true;
      }
      $.ajax({
        url: '/config',
        type: 'POST',
        dataType : "json",
        contentType: "application/json; charset=utf-8",
        //data : JSON.stringify(data),
        data: JSON.stringify(
          {
            "player" : 3,
            "ison" : isPlayeron
          }
        ), // data as js object
        success: function(result) {
            console.log("ok " + result)
            // Do something with the result
        }
      });
    });

    $( "#player1button" ).click(function() {
        console.log("doit)")
        $.ajax({
          url: '/config',
          type: 'POST',
          dataType : "json",
          contentType: "application/json; charset=utf-8",
          //data : JSON.stringify(data),
          data: {}, // data as js object
          success: function(result) {
              console.log("ok " + result)
              // Do something with the result
          }
        });
    });


    //global warning message dialogue
    function showMessage(value){
        $( "#player1" ).text(value);
    }
    var dialog = document.querySelector('dialog');

    if (! dialog.showModal) {
      dialogPolyfill.registerDialog(dialog);
    }

    dialog.querySelector('.close').addEventListener('click', function() {
      dialog.close();
    });

    // end warning message dialogue

    $( "#player1tracking" ).click(function() {

      socket.emit('recon', { data: 'player1' });
    });

    $( "#player2tracking" ).click(function() {
      socket.emit('recon', { data: 'player2' });
    });

    $( "#player3tracking" ).click(function() {
      socket.emit('recon', { data: 'player3' });
    });

    $( "#player4tracking" ).click(function() {
      socket.emit('recon', { data: 'player4' });
    });

    $( "#startgame" ).click(function() {
      socket.emit('startgame', { my: 'data' });
    });

    $( "#endgame" ).click(function() {
      socket.emit('endgame', { my: 'data' });
    });

    $( "#dildon" ).click(function() {
      socket.emit('dildon', { my: 'data' });
    });

    $( "#dildoff" ).click(function() {
      socket.emit('dildoff', { my: 'data' });
    });
    $( "#reset" ).click(function() {
      console.log("reset");
      $( "#timer" ).text(0);
      socket.emit('reset', { my: 'data' });
    });
    $( "#elevator" ).click(function() {
      console.log("elevator");
      socket.emit('lobby', { my: 'data' });
    });
    $( "#start" ).click(function() {
      console.log("start");
      socket.emit('start', { my: 'data' });
    });
  });
</script>

<div class="mdl-grid">

<div class="mdl-cell mdl-cell--3-col">
  <button id="startgame" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent startgame">
    STARTGAME
  </button>
  <button id="rotate" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent rotatebutton">
    ROTATE
  </button>
  <button id="endgame" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent endgame">
    ENDGAME
  </button>
  <hr>
  <button id="dildon" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
    DILDON
  </button>
  <button id="dildoff" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
    DILDOFF
  </button>
  <hr>
  <p>Scenes</p>
<!-- Accent-colored raised button with ripple -->
    <button id="reset" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent scenebutton">
      RESET
    </button>

    <button id="elevator" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent scenebutton">
      ELEVATOR
    </button>

    <button id="start" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent scenebutton">
      VOID
    </button>
    </div>
<div class="mdl-cell mdl-cell--1-col timer" id="timer">

</div>

<dialog class="mdl-dialog">
  <h4 class="mdl-dialog__title">Warning</h4>
  <div class="mdl-dialog__content">
    <span id="errormessage">
      Warning Message
    </span>
  </div>
  <div class="mdl-dialog__actions">
    <button type="button" class="mdl-button close">OK</button>
  </div>
</dialog>

</div>

<!-- PLAYER -->
<div class="mdl-grid player">
  <div class="mdl-cell mdl-cell--1-col">
    <b>Player 1</b>
    <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-1">
  <input type="checkbox" id="switch-1" class="mdl-switch__input" >
  <span class="mdl-switch__label"></span>
</label>
  </div>
  <div class="mdl-cell mdl-cell--1-col" id="player1tracking">
    Tracking
  </div>
  <div class="mdl-cell mdl-cell--2-col">
    <div class="mdl-selectfield mdl-js-selectfield">
       <select class="mdl-selectfield__select" id="player1" name="player1">
         <option value=""></option>
       </select>
         <label class="mdl-selectfield__label" for="player1">choose height</label>
    </div>
</div>
<div class="mdl-cell mdl-cell--2-col">
  <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="player1-option-1">
    <input type="radio" id="player1-option-1" class="mdl-radio__button" name="options1" value="1" checked>
    <span class="mdl-radio__label">Male</span>
  </label>

  <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="player1-option-2">
    <input type="radio" id="player1-option-2" class="mdl-radio__button" name="options1" value="2">
    <span class="mdl-radio__label">Female</span>
  </label>
 </div>
</div>
<!-- END PLAYER -->

<!-- PLAYER 2 -->
<div class="mdl-grid player">
  <div class="mdl-cell mdl-cell--1-col">
    <b>Player 2</b>
    <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-2">
  <input type="checkbox" id="switch-2" class="mdl-switch__input" >
  <span class="mdl-switch__label"></span>
</label>
  </div>
  <div class="mdl-cell mdl-cell--1-col" id="player2tracking">
    Tracking
  </div>
  <div class="mdl-cell mdl-cell--2-col">
    <div class="mdl-selectfield mdl-js-selectfield">
       <select class="mdl-selectfield__select" id="player2" name="player2">
         <option value=""></option>
       </select>
         <label class="mdl-selectfield__label" for="player2">choose height</label>
     </div>
</div>

<div class="mdl-cell mdl-cell--2-col">
  <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="player2-option-1">
    <input type="radio" id="player2-option-1" class="mdl-radio__button" name="options2" value="1" checked>
    <span class="mdl-radio__label">Male</span>
  </label>

  <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="player2-option-2">
    <input type="radio" id="player2-option-2" class="mdl-radio__button" name="options2" value="2">
    <span class="mdl-radio__label">Female</span>
  </label>
 </div>


</div>
<!-- END PLAYER -->

<!-- PLAYER 3-->
<div class="mdl-grid player">
  <div class="mdl-cell mdl-cell--1-col">
    <b>Player 3</b>
    <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-3">
  <input type="checkbox" id="switch-3" class="mdl-switch__input" >
  <span class="mdl-switch__label"></span>
</label>
  </div>
  <div class="mdl-cell mdl-cell--1-col" id="player3tracking">
    Tracking
  </div>
  <div class="mdl-cell mdl-cell--2-col">
    <div class="mdl-selectfield mdl-js-selectfield">
       <select class="mdl-selectfield__select" id="player3" name="player3">
         <option value=""></option>
       </select>
         <label class="mdl-selectfield__label" for="player3">choose height</label>
     </div>
</div>

<div class="mdl-cell mdl-cell--2-col">
  <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="player3-option-1">
    <input type="radio" id="player3-option-1" class="mdl-radio__button" name="options3" value="1" checked>
    <span class="mdl-radio__label">Male</span>
  </label>

  <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="player3-option-2">
    <input type="radio" id="player3-option-2" class="mdl-radio__button" name="options3" value="2">
    <span class="mdl-radio__label">Female</span>
  </label>
 </div>

 </div>
<!-- END PLAYER -->

<!-- PLAYER 4-->
<div class="mdl-grid player">
  <div class="mdl-cell mdl-cell--1-col">
    <b>Player 4</b>
    <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-4">
  <input type="checkbox" id="switch-4" class="mdl-switch__input" >
  <span class="mdl-switch__label"></span>
</label>
  </div>
  <div class="mdl-cell mdl-cell--1-col" id="player4tracking">
    Tracking
  </div>
  <div class="mdl-cell mdl-cell--2-col">
    <div class="mdl-selectfield mdl-js-selectfield">
       <select class="mdl-selectfield__select" id="player4" name="player4">
         <option value=""></option>
       </select>
         <label class="mdl-selectfield__label" for="player4">choose height</label>
     </div>
</div>

<div class="mdl-cell mdl-cell--2-col">
  <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="player4-option-1">
    <input type="radio" id="player4-option-1" class="mdl-radio__button" name="options4" value="1" checked>
    <span class="mdl-radio__label">Male</span>
  </label>

  <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="player4-option-2">
    <input type="radio" id="player4-option-2" class="mdl-radio__button" name="options4" value="2">
    <span class="mdl-radio__label">Female</span>
  </label>
 </div>

</div>

<!-- PERFORMER-->
<div class="mdl-grid player">
  <div class="mdl-cell mdl-cell--1-col">
    <b>Performer</b>
    <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="switch-5">
  <input type="checkbox" id="switch-5" class="mdl-switch__input" >
  <span class="mdl-switch__label"></span>
</label>
  </div>
  <div class="mdl-cell mdl-cell--1-col" id="player5tracking">
    Tracking
  </div>
  <div class="mdl-cell mdl-cell--2-col">
    <div class="mdl-selectfield mdl-js-selectfield">
       <select class="mdl-selectfield__select" id="player5" name="player5">
         <option value=""></option>
       </select>
         <label class="mdl-selectfield__label" for="player5">choose height</label>
     </div>
</div>


<!-- END PLAYER -->
</body>
</html>
